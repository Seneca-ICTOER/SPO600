<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-G-6502/6502-emulator">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/SPO600/img/pwa/icon-512x512.png">
<link rel="manifest" href="/SPO600/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/SPO600/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/SPO600/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/SPO600/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">6502 Emulator | SPO600 - Software Portability and Optimization</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//SPO600/G-6502/6502-emulator"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="6502 Emulator | SPO600 - Software Portability and Optimization"><meta data-rh="true" name="description" content="6502 Emulator"><meta data-rh="true" property="og:description" content="6502 Emulator"><link data-rh="true" rel="icon" href="/SPO600/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//SPO600/G-6502/6502-emulator"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/G-6502/6502-emulator" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/G-6502/6502-emulator" hreflang="x-default"><link rel="stylesheet" href="/SPO600/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/SPO600/assets/js/runtime~main.d1dc6600.js" as="script">
<link rel="preload" href="/SPO600/assets/js/main.48ab27b2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/SPO600/"><div class="navbar__logo"><img src="/SPO600/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SPO600/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SPO600 - Software Portability and Optimization</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/">Welcome to SPO600</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/A-Classes/week1-class1">Classes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/B-Labs/lab1">Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/C-Projects/project">Projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/D-ExtraResources/course-policies">Extra Resources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/E-ComputerArchitecture/computer-architecture">Computer Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/F-AssemblyLanguage/assembly-language">Assembly Language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/H-ARM/armv8">ARM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SPO600/G-6502/6502">6502</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502">6502</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SPO600/G-6502/6502-emulator">6502 Emulator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-addressing-modes">6502 Addressing Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-instructions-introduction">6502 Instructions - Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-math">6502 Math</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-jumps-branches-and-procedures">6502 Jumps, Branches, and Procedures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-counting-loop-example">6502 Counting Loop Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/6502-emulator-example-code">6502 Emulator Example Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/G-6502/8x8-bitmap-patterns-for-digits">8x8 Bitmap Patterns for Digits</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SPO600/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">6502</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">6502 Emulator</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>6502 Emulator</h1><p>A simple web-based <a href="/SPO600/G-6502/6502">6502</a> emulator is available at <a href="http://6502.cdot.systems." target="_blank" rel="noopener noreferrer">http://6502.cdot.systems.</a> This emulator is used in the <a href="/SPO600/">SPO600</a> course to teach 8-bit <a href="/SPO600/F-AssemblyLanguage/assembly-language">assembly language</a> before transitioning to more complex 64-bit x86_64 and <a href="/SPO600/H-ARM/armv8">AArch64</a> assembly language.</p><p><img loading="lazy" src="https://wiki.cdot.senecacollege.ca/w/imgs/6502_Emulator_Screenshot.png" alt="6502 Emulator" class="img_ev3q"></p><p>A screen shot of the 6502 Emulator running <a href="/SPO600/G-6502/6502-emulator-example-code#etch-a-sketchtm-style-drawing">the drawing example code</a>.</p><p><strong>Hex notation - $XX:</strong> In most 6502 documentation, including this page, the <code>$</code> prefix indicates hexadecimal notation. On other systems, this may be designated by a <code>0x</code> prefix.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-controls">Basic Controls<a class="hash-link" href="#basic-controls" title="Direct link to heading">​</a></h2><p>The emulator has a text area for entering and editing code, a small bit-mapped graphics screen (32x32 pixels), a character screen (80x25 characters), a debug area, a memory monitor, and a message area.</p><p>These controls are available at the top of the screen:</p><ul><li>Assemble - assembles the code in the text area, placing the resulting binary machine language code at $0600 and outputting any error messasges to the message area.</li><li>Run - runs the assembled code, if it assembled correctly. While the code is running, this button becomes a Stop button.</li><li>Reset - resets the state of the emulator (see the <a href="#peripherals-and-memory-map">Memory Map</a> section below).</li><li>Hexdump - shows, in hexadecimal, the values stored in memory starting at $0600</li><li>Disassemble - shows a combined hexdump and disassembly of code at $0600</li><li>Notes - displays notes about the emulator in the message area.</li></ul><p>The Speed slider lets you adjust the speed of the emulator from about 1% of native 6502 performance (left) to roughly full native speed (right). Setting the speed slider to a lower setting can be useful for debugging and for viewing the progress of operations on the displays.</p><p>There are also controls to Save and Load the text area to/from local storage on the computer on which it is running (as a download/upload); this works nicely with a local git repository (or clone).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembler-capabilities">Assembler Capabilities<a class="hash-link" href="#assembler-capabilities" title="Direct link to heading">​</a></h2><p>The assembler accepts these inputs:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a class="hash-link" href="#instructions" title="Direct link to heading">​</a></h3><ul><li>6502 assembler instructions, optionally prefixed with a label and a colon. Examples:<ul><li>simple instruction: <code>STA $10</code></li><li>instruction with a label: <code>LOOP: STA ($10),Y</code><ul><li>when a label is used, the address of the label can be referenced using the label name: <code>JMP LOOP</code></li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="directives">Directives<a class="hash-link" href="#directives" title="Direct link to heading">​</a></h3><ul><li>Origin assignment: You can tell the assembler where to assemble the following code with this syntax: <code>*=$XXXX</code> where XXXX is an address in hexadecimal. Multiple origin assignments may be used. Example: <code>*=$1800</code></li><li>&quot;define&quot; directive: Macro assignments may be created with the &quot;define&quot; directive: <code>define macro value</code> -- for example: <code>define WHITE $01</code> -- the macro value will be substituted into lines wherever the macro name appears (e.g., <code>LDA #WHITE</code>).</li><li>&quot;dcb&quot; directive: the Define Constant Byte (dcb) directive will cause the assembler to place individual byte values into memory. These byte values may be in hexadecimal prefixed with $, decimal with no prefix, or single printable non-space characters quoted with double quotes.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-and-low-label-bytes">High and Low Label Bytes<a class="hash-link" href="#high-and-low-label-bytes" title="Direct link to heading">​</a></h3><ul><li>The low byte of the label X can be accessed as &lt;X and the high byte can be accessed as <!-- -->&gt;<!-- -->X. For example, this code will load the low byte of the label &quot;start&quot; into the A register: <code>LDA #&lt;START</code> - note that this only works with labels, and not with macros.</li><li>You can use labels and origin assignment together to get a label for any address in the system. For example, to get a label pointing to the first byte of the character display, you could place this at the end of your program:</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*=$f000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISPLAY:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You could then create a pointer to that address at $0027 with this code:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LDA #&lt;DISPLAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STA $27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LDA #&gt;DISPLAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STA $28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="comments">Comments<a class="hash-link" href="#comments" title="Direct link to heading">​</a></h3><p>Any characters on a line following an unquoted semicolon <code>;</code> are treated as a comment and ignored.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-debugger">Using the Debugger<a class="hash-link" href="#using-the-debugger" title="Direct link to heading">​</a></h2><p>The debugger will constantly show the value of the emulated 6502&#x27;s registers. If you select the Debugger checkbox, you will be able to single-step through memory or jump to an address or label using the associated pushbuttons.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-monitor">Using the Monitor<a class="hash-link" href="#using-the-monitor" title="Direct link to heading">​</a></h2><p>Selecting the Monitor checkbox will display the specified region of memory as code is executed. For example, specifying a start of $00 and a length of $100 will display the entire zero page. Once enabled, the monitor may not display until the code is executed (via Run button).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="turning-the-text-screen-onoff">Turning the Text Screen On/Off<a class="hash-link" href="#turning-the-text-screen-onoff" title="Direct link to heading">​</a></h2><p>The checkbox labeled &quot;Text Screen&quot; can be used to hide the character display to free up more screen space for editing code. Note also that the character display can be used for additional program memory (whether the display is enabled or not) when it&#x27;s not required for output.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="peripherals-and-memory-map">Peripherals and Memory Map<a class="hash-link" href="#peripherals-and-memory-map" title="Direct link to heading">​</a></h2><p>The entire 64K address space is available and is populated with RAM except for peripherals and a small ROM area.</p><p>Visually, the memory map looks like this:</p><table><thead><tr><th>Page(s)</th><th>Address Range</th><th>Description</th><th>Subdivided Address Range</th><th>Description</th></tr></thead><tbody><tr><td>$00</td><td>$0000-$00FF</td><td>Zero Page</td><td>$0000-$00FD, $00F5-$00FD, $00FE, $00FF</td><td>Fast-access variable storage. Your software can use this region as you see fit. Variables used by the ROM routines -- Do not use this region if you are using the ROM routines. Random number generator. Last key pressed on keyboard -- See description below</td></tr><tr><td>$01</td><td>$0100-$01FF</td><td>Stack</td><td></td><td>Hardware stack - values are pushed on to the stack by the PHA, PHP, JSR, and BRK instructions (plus hardware interrupts), and pulled from the stack by the PLA, PLP, RTS, and RTI instructions. The stack is first-in/last out (FILO) aka last-in, first-out (LIFO), and it descends in memory. After 256 bytes have been pushed on the stack, the stack will overflow back to the beginning and the oldest data will be overwritten. The current stack location is tracked in the Stack Pointer (SP) register.</td></tr><tr><td>$02-$05</td><td>$0200-$05FF</td><td>Bitmapped Display</td><td></td><td>32x32 pixel graphics display -- See description below.</td></tr><tr><td>$<!-- -->06-<!-- -->$<!-- -->EF</td><td>$<!-- -->0600-<!-- -->$<!-- -->EFFF</td><td>Program Memory</td><td></td><td>RAM available for program use. By default, programs will be assembled starting at memory location $0600. This space is available for software and data. The arrangement and use of this memory is left to the programmer.</td></tr><tr><td>$F0-FC</td><td>$<!-- -->F000-<!-- -->$<!-- -->FCFF</td><td>Character Display</td><td></td><td>80 colummn x 25 line character display for text messages -- See description below.</td></tr><tr><td>$FD</td><td>$<!-- -->FD00-<!-- -->$<!-- -->FDFF</td><td>Reserved</td><td></td><td>This memory range is reserved for future ROM expansion.</td></tr><tr><td>$<!-- -->FE-<!-- -->$<!-- -->FF</td><td>$<!-- -->FE00-<!-- -->$<!-- -->FFFF</td><td>ROM</td><td>$<!-- -->FE00-FF80, $FF81-<!-- -->$<!-- -->FFF9, <!-- -->$<!-- -->FFFA-<!-- -->$<!-- -->FFFF</td><td>This region is occupied by a small Read-Only Memory (ROM) image that contains input-output routines for the character display and keyboard. Entry point table - This table consists of 3-byte &quot;entry points&quot; for the ROM routines. To access a particular routine, use the Jump to SubRoutine (JSR) instruction with the corresponding entry point. This arrangement allows the ROM image to be revised without changing the entry point locations. See <a href="#rom-routines">ROM Routines</a> below for details on the available entry points. Hardware vectors - On a hardware 6502 system, three 2-byte pointers (or &quot;vectors&quot;) are used to access software routines to handle non-maskable interrupts (NMI) and the BRK instruction (vector $FFFA), CPU reset (vector $FFFC), and hardware interrupt (IRQ) (vector $FFFF). Since this is an emulator, these vectors are not used.</td></tr></tbody></table><p>There are four peripherals available:</p><ul><li>a one-byte pseudo-random number generator (<em>PRNG</em>) at <strong>$fe</strong>.</li><li>a single-key buffer at <strong>$ff</strong> - if you write to this address, it will remain unchanged until a new keypress is received. Printable characters plus Return/Enter and Backspace are reported as ASCII codes; cursor keys are reported as $80=up, $81=right, $82=down, $83=left.</li><li>a 32x32 pixel bitmapped display at <strong>$0200-$05ff</strong>, with one byte per pixel. The upper-left pixel is at address $0200, the pixel to the right is $0201, and the first pixel on the second row is $0220. A <a href="https://docs.google.com/spreadsheets/d/1a1-ZZ1opY8xcuUHNxj3YW75dxOPynSuP2-QGSvZGzYY/edit?usp=sharing" target="_blank" rel="noopener noreferrer">reference spreadsheet</a> shows the row/column to address mapping. The lowest four bits of each byte select one of 16 colours.<ul><li>$0: Black</li><li>$1: White</li><li>$2: Red</li><li>$3: Cyan</li><li>$4: Purple</li><li>$5: Green</li><li>$6: Blue</li><li>$7: Yellow</li><li>$8: Orange</li><li>$9: Brown</li><li>$a: Light red</li><li>$b: Dark grey</li><li>$c: Grey</li><li>$d: Light green</li><li>$e: Light blue</li><li>$f: Light grey</li></ul></li><li>an 80x25 character display at <strong>$<!-- -->f000-<!-- -->$<!-- -->fcff</strong>, with one byte per character. Printable ASCII characters will be displayed. If the high-order bit is set, the character will be shown in  <strong>reverse video</strong> .</li><li>a read-only ROM chip is present at <strong>$<!-- -->fe00-<!-- -->$<!-- -->ffff</strong>; see below for details.</li></ul><p>The Reset button clears the zero page, bitmap display, and character display, and resets the stack pointer (SP=$ff), program counter (PC=$0600), status register (P=$30), and the general purpose registers (A=X=Y=$00).</p><p>Code is assembled starting at $0600 (unless the code changes the location with a <code>*=address</code> directive). Memory following the program is reset to $00. A <code>BRK</code> instruction ($00) will cause the program to stop and return control to the debugger.</p><p>For more details, press the Notes button in the emulator.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rom-routines">ROM Routines<a class="hash-link" href="#rom-routines" title="Direct link to heading">​</a></h2><p>Many 6502 personal/home computers had the operating system installed in read-only memory (ROM) chips. The emulator has a small ROM chip with these simple input/output (I/O) routines defined:</p><ul><li>SCINIT $ff81 - Initialize and clear the character display</li><li>CHRIN $ffcf - Input one character from keyboard (returns A (that is, the return value will be placed in the Accumulator register))</li><li>CHROUT $ffdw - Outputs one character (A) to the screen at the current cursor position. Screen will wrap/scroll appropriately. Printable characters and cursor codes ($80/$81/$82/$83 for up/right/left/down) as well as RETURN ($0d) are accepted. Printable ASCII codes with the high bit set will be printed in reverse video.</li><li>SCREEN $ffed - Returns the character screen size in the X and Y registers.</li><li>PLOT $fff0 - gets (CARRY=1) or sets (CARRY=0) the cursor position</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   If C=0: X,Y registers set the cursor position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           Y:A is returned as a pointer to the current screen position </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               (i.e., Y is the high byte and A is the low byte of a pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               to the memory address of the current cursor position)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   If C=1: X,Y registers return the current cursor position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           A contains the character at the current cursor location</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Registers which are not used for input/output are not affected by the ROM routines. The ROM routines use $f0-fd in the zero page for variable storage.</p><p>To use the ROM routines, these define directives may be pasted into your code:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">define      SCINIT      $ff81 ; initialize/clear screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define      CHRIN       $ffcf ; input character from keyboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define      CHROUT      $ffd2 ; output character to screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define      SCREEN      $ffed ; get screen size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define      PLOT        $fff0 ; get/set cursor coordinates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can then access the routines by name using the <code>JSR</code> instruction:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LDA #$41        ; ASCII code for the letter &quot;A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JSR CHROUT      ; execute the CHROUT routine (print the character on the screen)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>ROM Routine Names:</strong> The ROM routine names and locations pay homage to a famous 6502-based family of computers. Discovering which one is left as an exercise for the reader!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-code">Example Code<a class="hash-link" href="#example-code" title="Direct link to heading">​</a></h2><p>See the <a href="/SPO600/G-6502/6502-emulator-example-code">6502 Emulator Example Code</a> page.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-code">Source Code<a class="hash-link" href="#source-code" title="Direct link to heading">​</a></h2><p>The emulator&#x27;s source code can be found at <a href="https://github.com/ctyler/6502js" target="_blank" rel="noopener noreferrer">https://github.com/ctyler/6502js</a> ... Pull Requests are welcome.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/SPO600/tree/main/docs/G-6502/6502-emulator.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SPO600/G-6502/6502"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">6502</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SPO600/G-6502/6502-addressing-modes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">6502 Addressing Modes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-controls" class="table-of-contents__link toc-highlight">Basic Controls</a></li><li><a href="#assembler-capabilities" class="table-of-contents__link toc-highlight">Assembler Capabilities</a><ul><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#directives" class="table-of-contents__link toc-highlight">Directives</a></li><li><a href="#high-and-low-label-bytes" class="table-of-contents__link toc-highlight">High and Low Label Bytes</a></li><li><a href="#comments" class="table-of-contents__link toc-highlight">Comments</a></li></ul></li><li><a href="#using-the-debugger" class="table-of-contents__link toc-highlight">Using the Debugger</a></li><li><a href="#using-the-monitor" class="table-of-contents__link toc-highlight">Using the Monitor</a></li><li><a href="#turning-the-text-screen-onoff" class="table-of-contents__link toc-highlight">Turning the Text Screen On/Off</a></li><li><a href="#peripherals-and-memory-map" class="table-of-contents__link toc-highlight">Peripherals and Memory Map</a></li><li><a href="#rom-routines" class="table-of-contents__link toc-highlight">ROM Routines</a></li><li><a href="#example-code" class="table-of-contents__link toc-highlight">Example Code</a></li><li><a href="#source-code" class="table-of-contents__link toc-highlight">Source Code</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SPO600 - Software Portability and Optimization</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SPO600/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/SPO600/assets/js/runtime~main.d1dc6600.js"></script>
<script src="/SPO600/assets/js/main.48ab27b2.js"></script>
</body>
</html>