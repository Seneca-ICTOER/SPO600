<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-F-AssemblyLanguage/assembler-basics">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/SPO600/img/pwa/icon-512x512.png">
<link rel="manifest" href="/SPO600/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/SPO600/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/SPO600/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/SPO600/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Assembler Basics | SPO600 - Software Portability and Optimization</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//SPO600/F-AssemblyLanguage/assembler-basics"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Assembler Basics | SPO600 - Software Portability and Optimization"><meta data-rh="true" name="description" content="Assembler Basics"><meta data-rh="true" property="og:description" content="Assembler Basics"><link data-rh="true" rel="icon" href="/SPO600/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//SPO600/F-AssemblyLanguage/assembler-basics"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/F-AssemblyLanguage/assembler-basics" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/F-AssemblyLanguage/assembler-basics" hreflang="x-default"><link rel="stylesheet" href="/SPO600/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/SPO600/assets/js/runtime~main.28bb5508.js" as="script">
<link rel="preload" href="/SPO600/assets/js/main.a3fbaea8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/SPO600/"><div class="navbar__logo"><img src="/SPO600/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SPO600/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SPO600 - Software Portability and Optimization</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/">Welcome to SPO600</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/A-Classes/test-file">Classes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/B-Labs/lab1">Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/C-Projects/project">Projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/D-ExtraResources/course-policies">Extra Resources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/E-ComputerArchitecture/topic-file-1">Computer Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SPO600/F-AssemblyLanguage/assembly-language">Assembly Language</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/assembly-language">Assembly Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SPO600/F-AssemblyLanguage/assembler-basics">Assembler Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/inline-assembly-language">Inline Assembly Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/executable-and-linkable-format">Executable and Linkable Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/symbol">Symbol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/syscalls">Syscalls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/aarch64-register-and-instruction-quick-start">AArch64 Register and Instruction Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/F-AssemblyLanguage/x86-64-register-and-instruction-quick-start">X86 64 Register and Instruction Quick Start</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/H-ARM/armv8">ARM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/G-6502/6502">6502</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SPO600/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Assembly Language</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Assembler Basics</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Assembler Basics</h1><p>When you program in <a href="/SPO600/F-AssemblyLanguage/assembly-language">assembly language</a>, you&#x27;re directly programming the &quot;bare metal&quot; hardware. This means that many of the compile-time and run-time checks, error messages, and diagnostics that are present in other languages are not available. The computer will follow your instructions exactly, even if they are completely wrong (like executing data), and when something goes wrong, your program won&#x27;t terminate until it tries to do something that&#x27;s not permitted, such as execute an invalid opcode or attempt to access a protected or unmapped region of memory. When that happens, the CPU will signal an exception, and in most cases the operating system will shut down the offending process.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="format-of-an-assembly-language-program">Format of an Assembly Language program<a class="hash-link" href="#format-of-an-assembly-language-program" title="Direct link to heading">​</a></h2><p>The traditional extension for assembly-language source files is <code>.s</code> (e.g., <code>example.s</code>), or <code>.S</code> for files that need to go through the C preprocessor (<code>cpp</code>).</p><p>An assembly-language program consists of:</p><ol><li><a href="/SPO600/F-AssemblyLanguage/symbol">Symbols</a> that are constants which correspond to memory addresses, registers, or other values.</li><li>Instructions - Mnemonics for an operations, each followed by zero or more arguments.</li><li>Data - Values used by the program for things such as initial variable values and string or numeric constants.</li></ol><p>Assembler <strong>directives</strong> are used to control the assembly of the code, by specifying output file sections (such as .text (machine code), .data (read/write data), or .rodata (read-only data/constants) in an ELF file) and data formats (such as word size for numeric values), and by defining macros.</p><p>Consider this x86_64 assembly language &quot;Hello World&quot; program:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.global  _start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stdout = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $len,%rdx                       /* message length */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $msg,%rsi                       /* message location */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $stdout,%rdi                    /* file descriptor stdout */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $1,%rax                         /* syscall sys_write */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        syscall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $0,%rdi                         /* exit status */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov    $60,%rax                        /* syscall sys_exit */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        syscall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.rodata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">msg:    .ascii      &quot;Hello, world!\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.set len , . - msg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this program, which was written using GNU Assembler (gas) syntax, text is coloured according to its type:</p><ul><li>directives</li><li>instructions</li><li>symbols</li><li>expressions</li><li>other syntax elements, such as prefixes and delimiters</li></ul><p>In GNU assembler, a symbol may be set in one of three ways:</p><ol><li>Using the <code>.set</code> directive (in the example above, len line)</li><li>Using an assignment using an equals sign (in the example above, stdout line), which the GNU assembler treats as an alternative syntax for the <code>.set</code> directive</li><li>As a label (such as _start or msg in the example above). A label set in this way is identified by the trailing colon, and is set to the current memory location in the instruction or data sequence. Labels may be used for loading/storing information, or as the target of branches/jumps.</li></ol><p>In the program above:</p><ul><li>.text is a directive (equivalent to the longer directive &quot;.section .text&quot;) which specifies that the following instructions/data should be placed in the &quot;.text&quot; section of the output ELF file.</li><li>.rodata is a similar directive which specifies that the following instructions/data should be placed in the .rodata section of the output ELF file. In the case of this program, they could alternately be placed in the .data section, which is for read-write data (data which is write-protected in memory), but .rodata was used because the string is not modified by the program (it&#x27;s a constant).</li><li>.global (or .globl) is a directive which makes the following symbol visible to the linker. Otherwise, symbols are normally lost by link time. In this case, the linker needs to know the value of the special symbol _start in order to know where execution is to begin in the program (which is not always at the start of the .text section).</li><li>_start is a label which is equivalent to the memory location of the first instruction in the program.</li><li>msg is a label which is equivalent to the memory location of the first byte of the string &quot;Hello, World!\n&quot;</li><li>.set is a directive which sets a symbol (len) equal to the value of an expression (in this example, &quot;. - msg&quot; meaning the current memory location minus the value of the label &quot;msg&quot;). Note that the GNU assembler accepts <code>a=1</code> as equivalent to <code>.set a, 1</code> -- both are counted as directives regardless of the presence of the <code>.set</code> keyword.</li></ul><p>Note that symbols are not variables - they are constants that are calculated at compile-time. However, they may contain an address at which a variable is stored.</p><p>Note also that the syntax will vary from assembler to assembler and from architecture to architecture.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6502-assembly-language-in-the-emulator">6502 Assembly Language in the Emulator<a class="hash-link" href="#6502-assembly-language-in-the-emulator" title="Direct link to heading">​</a></h2><p>The <a href="/SPO600/G-6502/6502-emulator">6502 Emulator</a> provides a very simple assembler for <a href="/SPO600/G-6502/6502">6502</a> code:</p><p>Simple text-substitution macros can be defined with <code>define name value</code> like this:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> define SCREEN $f000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The DCB (Declare Constant Byte) directive can be used to create a group of bytes in memory. Byte values are comma-separated and may be double-quoted single printable characters (except space, double quote, or comma), decimal values, or hexadecimal values prefixed with $, like this:</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> dcb 12,34,56</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dcb $33,$66,$CC,$FF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dcb &quot;A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dcb &quot;T&quot;,&quot;e&quot;,&quot;s&quot;,&quot;t&quot;,$20,&quot;4&quot;,&quot;.&quot;,0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The current assembly pointer starts at $0600 and increments with output bytes; it can be changed with this syntax:</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> *=$0800</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To create an assembly language program in the emulator, simply type or paste the code in the text area and hit Assemble. If no error messages are output, the Run button will be enabled, and pressing that will run your code. To save your code, copy and paste it from the text area into an editor.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembly-language-on-a-linux-system">Assembly Language on a Linux System<a class="hash-link" href="#assembly-language-on-a-linux-system" title="Direct link to heading">​</a></h2><p>On a Linux system, you will need to meet three requirements to get your assembly language program to work:</p><ol><li>Code must be placed in the <code>.text</code> section of the ELF file.</li><li>Data must be placed in either the <code>.rodata</code> (read-only data) or <code>.data</code> (read/write data) sections of the ELF file.</li><li>There must be a globally-defined symbol which the linker (<code>ld</code>) will use to find the entry point to your program. If the code is being directly compiled by the assembler, this symbol must be <code>_start</code> -- but if the code is being compiled by gcc, this symbol must be called <code>main</code> (a preamble will be located at <code>_start</code> which will then transfer control to <code>main</code>).</li></ol><p>The file extension should be <code>.s</code> for assembler source without directives (for compilation with the assembler) or <code>.S</code> for assembler with preprocessor directives (for compilation with gcc).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiling-an-assembly-language-program-using-the-gnu-assembler">Compiling an Assembly Language Program using the GNU Assembler<a class="hash-link" href="#compiling-an-assembly-language-program-using-the-gnu-assembler" title="Direct link to heading">​</a></h3><ol><li>Run the assembler: <code>as -g -o test.o test.s</code></li><li>Run the linker: <code>ld -o test test.o</code></li></ol><p>Note that the <code>-g</code> option assembles the program with symbolic debugging information included.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiling-an-assembly-language-program-using-the-nasm-assembler">Compiling an Assembly Language Program using the NASM Assembler<a class="hash-link" href="#compiling-an-assembly-language-program-using-the-nasm-assembler" title="Direct link to heading">​</a></h3><ol><li>Run the assembler: <code>nasm -g -f elf64 -o test.o test.s</code></li><li>Run the linker: <code>ld -o test test.o</code></li></ol><p>Notes:</p><ol><li>NASM only works with x86 code.</li><li>The source file must be written using NASM syntax (which is substantially different from the GNU assembler syntax).</li><li>The <code>-f elf64</code> option instructs NASM to assemble the code for a 64-bit target (x86_64).</li><li>The <code>-g</code> option assembles the program with symbolic debugging information included.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiling-an-assembly-language-program-using-gcc">Compiling an Assembly Language program using GCC<a class="hash-link" href="#compiling-an-assembly-language-program-using-gcc" title="Direct link to heading">​</a></h3><ol><li>Run the preprocessor, assembler, and linker using the gcc command: <code>gcc -g -o test.o test.S</code></li></ol><p>Note that the <code>-g</code> option assembles the program with symbolic debugging information included, and that the normal GCC optimization options are not available.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instruction-set-architecture-information">Instruction Set Architecture Information<a class="hash-link" href="#instruction-set-architecture-information" title="Direct link to heading">​</a></h3><p>To get started with specific instruction set architectures (ADD LINK), see:</p><ul><li><a href="/SPO600/F-AssemblyLanguage/x86-64-register-and-instruction-quick-start">x86_64 Register and Instruction Quick Start</a></li><li><a href="/SPO600/F-AssemblyLanguage/aarch64-register-and-instruction-quick-start">aarch64 Register and Instruction Quick Start</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">​</a></h2><ul><li><a href="https://sourceware.org/binutils/docs/as/" target="_blank" rel="noopener noreferrer">Using as, The GNU Assembler</a> (GAS manual)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/SPO600/tree/main/docs/F-AssemblyLanguage/assembler-basics.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SPO600/F-AssemblyLanguage/assembly-language"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Assembly Language</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SPO600/F-AssemblyLanguage/inline-assembly-language"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Inline Assembly Language</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#format-of-an-assembly-language-program" class="table-of-contents__link toc-highlight">Format of an Assembly Language program</a></li><li><a href="#6502-assembly-language-in-the-emulator" class="table-of-contents__link toc-highlight">6502 Assembly Language in the Emulator</a></li><li><a href="#assembly-language-on-a-linux-system" class="table-of-contents__link toc-highlight">Assembly Language on a Linux System</a><ul><li><a href="#compiling-an-assembly-language-program-using-the-gnu-assembler" class="table-of-contents__link toc-highlight">Compiling an Assembly Language Program using the GNU Assembler</a></li><li><a href="#compiling-an-assembly-language-program-using-the-nasm-assembler" class="table-of-contents__link toc-highlight">Compiling an Assembly Language Program using the NASM Assembler</a></li><li><a href="#compiling-an-assembly-language-program-using-gcc" class="table-of-contents__link toc-highlight">Compiling an Assembly Language program using GCC</a></li><li><a href="#instruction-set-architecture-information" class="table-of-contents__link toc-highlight">Instruction Set Architecture Information</a></li></ul></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SPO600 - Software Portability and Optimization</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SPO600/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/SPO600/assets/js/runtime~main.28bb5508.js"></script>
<script src="/SPO600/assets/js/main.a3fbaea8.js"></script>
</body>
</html>