<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-B-Labs/lab5">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/SPO600/img/pwa/icon-512x512.png">
<link rel="manifest" href="/SPO600/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/SPO600/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/SPO600/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/SPO600/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 5 | SPO600 - Software Portability and Optimization</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//SPO600/B-Labs/lab5"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 5 | SPO600 - Software Portability and Optimization"><meta data-rh="true" name="description" content="Lab 5 for Students to Complete and Submit"><meta data-rh="true" property="og:description" content="Lab 5 for Students to Complete and Submit"><link data-rh="true" rel="icon" href="/SPO600/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//SPO600/B-Labs/lab5"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/B-Labs/lab5" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//SPO600/B-Labs/lab5" hreflang="x-default"><link rel="stylesheet" href="/SPO600/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/SPO600/assets/js/runtime~main.923d0cda.js" as="script">
<link rel="preload" href="/SPO600/assets/js/main.48ab27b2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/SPO600/"><div class="navbar__logo"><img src="/SPO600/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SPO600/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SPO600 - Software Portability and Optimization</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/">Welcome to SPO600</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SPO600/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/A-Classes/week1-class1">Classes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SPO600/B-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/B-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/B-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/B-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SPO600/B-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SPO600/B-Labs/lab5">Lab 5</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/C-Projects/project">Projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/D-ExtraResources/course-policies">Extra Resources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/E-ComputerArchitecture/computer-architecture">Computer Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/F-AssemblyLanguage/assembly-language">Assembly Language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/H-ARM/armv8">ARM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/SPO600/G-6502/6502">6502</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SPO600/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 5</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Algorithm Selection Lab 5</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-of-this-lab">Purpose of this Lab<a class="hash-link" href="#purpose-of-this-lab" title="Direct link to heading">​</a></h2><p>In this lab, you will investigate the impact of different algorithms which produce the same effect.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="x86_64-and-aarch64-systems">x86_64 and AArch64 Systems<a class="hash-link" href="#x86_64-and-aarch64-systems" title="Direct link to heading">​</a></h2><p>This lab must be performed on both x86_64 and AArch64 systems. You may use the <a href="/SPO600/D-ExtraResources/servers">SPO600 Servers</a> or you may use other system(s) -- it might make sense to use your own x86_64 system and <a href="/SPO600/D-ExtraResources/servers#aarch64-israelcdotsystems">israel.cdot.systems</a> for AArch64.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-instructions">Lab Instructions<a class="hash-link" href="#lab-instructions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h3><ul><li>Digital sound is typically represented, uncompressed, as signed 16-bit integer signal samples. There are two streams of samples, one each for the left and right stereo channels, at typical sample rates of 44.1 or 48 thousand samples (kHz)per second per channel, for a total of 88.2 or 96 thousand samples per second. Since there are 16 bits (2 bytes) per sample, the data rate is 88.2 <!-- -->*<!-- --> 1000 <!-- -->*<!-- --> 2 = 176,400 bytes/second (~172 KiB/sec) or 96 <!-- -->*<!-- --> 1000 <!-- -->*<!-- --> 2 = 192,000 bytes/second (~187.5 KiB/sec).</li><li>To change the volume of sound, each sample can be scaled (multiplied) by a volume factor, in the range of 0.00 (silence) to 1.00 (full volume).</li><li>On a mobile device, the amount of processing required to scale sound will affect battery life.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-approaches">Multiple Approaches<a class="hash-link" href="#multiple-approaches" title="Direct link to heading">​</a></h3><p>Six programs are provided, each with a different approach to the problem, named <code>vol0.c</code> through <code>vol5.c</code>. A header file, <code>vol.h</code>, defines how much data (in number of sample) will be processed by each program, as well as the volume level to be used for scaling (50%).</p><p>These are the six programs:</p><ol><li>vol0.c is the basic or naive algorithm. This approach multiplies each sound sample by the volume scaling factor, casting from signed 16-bit integer to floating point and back again. Casting between integer and floating point can be <a href="/SPO600/E-ComputerArchitecture/expensive">expensive</a> operations.</li><li>vol1.c does the math using fixed-point calculations. This avoids the overhead of casting between integer and floating point and back again.</li><li>vol2.c pre-calculates all 65536 different results, and then looks up the answer for each input value.</li><li>vol3.c is a dummy program - it doesn&#x27;t scale the volume at all. It can be used to determine some of the overhead of the rest of the processing (besides scaling the volume) done by the other programs.</li><li>vol4.c uses Single Instruction, Multiple Data (SIMD) instructions accessed through inline assembley (assembly language code inserted into a C program). This program is specific to the AArch64 architecture and will not build for x86<!-- -->_<!-- -->64.</li><li>vol5.c uses SIMD instructions accessed through Complier Intrinsics. This program is also specific to AArch64.</li></ol><p><strong>Note that vol4.c and vol5.c will build only on AArch64 systems because they use architecture-specific SIMD instructions.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dont-compare-across-machines">Don&#x27;t Compare Across Machines<a class="hash-link" href="#dont-compare-across-machines" title="Direct link to heading">​</a></h3><p>In this lab, <em>do not</em> compare the relative performance across different machines, because various systems have different microarchitectures, memory configurations, peripheral implementations, and clock speeds, from mobile-class to server-class (e.g. Intel Atom vs. Xeon; AMD APU vs. Threadripper; ARM Cortex-A55 vs. Neoverse-V2).</p><p>However, <em>do</em> compare the relative performance of the various algorithms on the <em>same</em> machine.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="important">Important!<a class="hash-link" href="#important" title="Direct link to heading">​</a></h3><p>The hardest part of this lab, and the most critical component, is being able to separate the performance of the volume scaling code from the rest of the code (which only exists to set up the test of the scaling code). The volume scaling code runs <em>very</em> quickly, and is dwarfed by the rest of the code.</p><p>You <strong>must</strong>:</p><ul><li>Control variables in your test environment.<ul><li>What else is the machine doing while you are testing?</li><li>Who else is logged in to the machine?</li><li>What background operations are being performed?</li><li>How does your login on the machine affect performance (e.g., network activity)?</li></ul></li><li><strong>Isolate the performance of the volume scaling code</strong>. This is one of the most important parts of this lab! There are two practical approaches:<ul><li>Subtract the performance of the dummy version of the program from each of the other versions, or</li><li>Add code to the program to measure and report just the performance of the volume-scaling code</li></ul></li><li>Repeat the tests multiple times to ensure that the results you are getting are consistent, valid, and accurately reflect the performance of the volume scaling code.<ul><li>Make sure you are performing enough calculation to give a useful result -- adjust the SAMPLES value in <code>vol.h</code> to a sufficiently high value</li><li>Discard outliers (unusually high or low results)</li><li>Average the results.</li><li>Take some measure of the amount of variation of your results (e.g., tolerance limits or standard deviation).</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">​</a></h3><ul><li>ARM Aarch64 documentation<ul><li><a href="http://developer.arm.com/" target="_blank" rel="noopener noreferrer">ARM Developer Information Centre</a><ul><li><a href="https://developer.arm.com/docs/den0024/latest" target="_blank" rel="noopener noreferrer">ARM Cortex-A Series Programmer’s Guide for ARMv8-A</a></li><li>The short guide to the ARMv8 instruction set: <a href="https://www.element14.com/community/servlet/JiveServlet/previewBody/41836-102-1-229511/ARM.Reference_Manual.pdf" target="_blank" rel="noopener noreferrer">ARMv8 Instruction Set Overview</a> (&quot;ARM ISA Overview&quot;)</li><li>The long guide to the ARMv8 instruction set: <a href="https://developer.arm.com/docs/ddi0487/latest/arm-architecture-reference-manual-armv8-for-armv8-a-architecture-profile" target="_blank" rel="noopener noreferrer">ARM Architecture Reference Manual ARMv8, for ARMv8-A architecture profile</a> (&quot;ARM ARM&quot;)</li></ul></li><li><a href="https://developer.arm.com/docs/ihi0055/latest/procedure-call-standard-for-the-arm-64-bit-architecture" target="_blank" rel="noopener noreferrer">Procedure Call Standard for the ARM 64-bit Architecture (AArch64)</a></li></ul></li><li>x86_64 Documentation<ul><li>AMD: <a href="https://developer.amd.com/resources/developer-guides-manuals/" target="_blank" rel="noopener noreferrer">https://developer.amd.com/resources/developer-guides-manuals/</a> (see the AMD64 Architecture section, particularly the AMD64 Architecture Programmer’s Manual Volume 3: General Purpose and System Instructions)</li><li>Intel: <a href="http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html" target="_blank" rel="noopener noreferrer">http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html</a></li><li>Web sites<ul><li><a href="http://ref.x86asm.net/" target="_blank" rel="noopener noreferrer">http://ref.x86asm.net/</a></li><li><a href="http://sandpile.org/" target="_blank" rel="noopener noreferrer">http://sandpile.org/</a></li></ul></li></ul></li><li>Assembler and Inline Assembler<ul><li><a href="/SPO600/F-AssemblyLanguage/assembler-basics">Assembler Basics</a></li><li><a href="/SPO600/F-AssemblyLanguage/inline-assembly-language">Inline Assembly Language</a></li><li>GAS Manual - Using as, The GNU Assembler: <a href="https://sourceware.org/binutils/docs/as/" target="_blank" rel="noopener noreferrer">https://sourceware.org/binutils/docs/as/</a><ul><li>Specifically, the <a href="http://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/Extended-Asm.html" target="_blank" rel="noopener noreferrer">Assembler Instructions with C Expression Operands</a> section</li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">​</a></h2><p>Get the files for this lab from one of the <a href="/SPO600/D-ExtraResources/servers">SPO600 Servers</a> -- but you can perform the lab wherever you want (feel free to use your laptop or home system). Test on both an x86<!-- -->_<!-- -->64 and an AArch64 system.</p><p>The files for this lab are in the archive <code>/public/spo600-volume-examples.tgz</code> on each of the SPO600 servers. The archive contains:</p><ul><li><code>vol.h</code> controls the number of samples to be processed and the volume level to be used</li><li><code>vol0.c</code> through <code>vol5.c</code> implement the various algorithms</li><li><code>vol_createsample.c</code> contains a function to create dummy samples</li><li>The <code>Makefile</code> can be used to build the programs</li></ul><p>Perform these steps <strong>on both x86_64 and AArch64 systems</strong>:</p><ol><li>Unpack the archive <code>/public/spo600-volume-examples.tgz</code></li><li>Study each of the source code files and make sure that you understand what the code is doing.</li><li><strong>Make a prediction</strong> of the relative performance of each scaling algorithm.</li><li>Build and test each of the programs.<ul><li>Do all of the algorithms produce the same output?<ul><li>How can you verify this?</li><li>If there is a difference, is it significant enough to matter?</li></ul></li><li>Change the number of samples so that each program takes a reasonable amount of time to execute (suggested minimum is 20 seconds).</li></ul></li><li>Test the performance of each program (vol0 through vol3 on x86<!-- -->_<!-- -->64, and vol0 through vol5 on AArch64)<ul><li>Find a way to measure performance without the time taken to perform the test setup pre-processing (generating the samples) and post-processing (summing the results) so that you can measure <em>only</em> the time taken to scale the samples. <strong>This is the hard part!</strong></li><li>How much time is spent scaling the sound samples?</li><li>Do multiple runs take the same time? How much variation do you observe? What is the likely cause of this variation?</li><li>Is there any difference in the results produced by the various algorithms?</li><li>Does the difference between the algorithms vary depending on the architecture and implementation on which you test?</li><li>What is the relative memory usage of each program?</li></ul></li><li>See if you can measurably increase performance by changing the compiler option (via the Makefile)</li><li>Was your prediction about performance accurate?</li><li>Find all of the questions, marked with <code>Q:</code>, in the program comments, and answer those questions.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deliverables">Deliverables<a class="hash-link" href="#deliverables" title="Direct link to heading">​</a></h3><p>Blog about your experiments with a detailed analysis of your results, including memory usage, performance, accuracy, and trade-offs. Include answers to all of the questions marked with Q: in the source code.</p><p><strong>Make sure you convincingly prove your results to your reader!</strong> Re-read the <a href="#important">section marked Important above</a> and make sure you address the issues explained there. Also be sure to explain what you&#x27;re doing so that a reader coming across your blog post understands the context (in other words, don&#x27;t just jump into a discussion of optimization results -- give your post some context).</p><p><strong>Optional - Recommended</strong>: Compare results across several <strong>implementations</strong> of AArch64 and x86<!-- -->_<!-- -->64 systems. Note that on different CPU implementations, the relative performance of different algorithms will vary; for example, table lookup may outperform other algorithms on a system with a fast memory system (cache), but not on a system with a slower memory system.</p><ul><li>For AArch64, you could compare the performance on AArchie against a Raspberry Pi 4 (in 64-bit mode) or an ARM Chromebook.</li><li>For x86<!-- -->_<!-- -->64, you could compare the performance of different processors, such as portugal.cdot.systems, your own laptop or desktop, and Seneca systems such as Matrix or lab desktops.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="things-to-consider">Things to consider<a class="hash-link" href="#things-to-consider" title="Direct link to heading">​</a></h3><p><strong>Design of Your Tests</strong></p><ul><li>Most solutions for a problem of this type involve generating a large amount of data in an array, processing that array using the function being evaluated, and then storing that data back into an array. The test setup can take more time than the actual test! Make sure that you measure the time taken for the code in question (the part that scales the sound samples) ONLY -- you need to be able to remove the rest of the processing time from your evaluation.</li><li>You may need to run a massive large amount of sample data through the function to be able to detect its performance.</li><li>If you do not use the output from your calculation (e.g., do something with the output array), the compiler may recognize that, and remove the code you&#x27;re trying to test. Be sure to process the results in some way so that the optimizer preserves the code you want to test. It is a good idea to calculate some sort of verification value to ensure that both approaches generate the same results.</li><li>Be aware of what other tasks the system is handling during your test run, including software running on behalf of other users.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a class="hash-link" href="#tips" title="Direct link to heading">​</a></h3><p><strong>Analysis</strong></p><p>Do a thorough analysis of the results. Be certain (and prove!) that your performance measurement does not include the generation or summarization of the test data. Do multiple runs and discard the outliers. Decide whether to use mean, minimum, or maximum time values from the multiple runs, and explain why you made that decision. Control your variables well. Show relative performance as percentage change, e.g., &quot;this approach was NN% faster than that approach&quot;.</p><p><strong>Time and Memory Usage of a Program</strong></p><p>You can get basic timing information for a program by running <code>time programName</code> -- the output will show the total time taken (real), the amount of CPU time used to run the application (user), and the amount of CPU time used by the operating system on behalf of the application (system). The version of the <code>time</code> command located in <code>/bin/time</code> gives slightly different information than the version built in to bash -- including maximum resident memory usage: <code>/bin/time ./programName</code></p><p><strong>SOX</strong></p><p>If you want to try this with actual sound samples, you can convert a sound file of your choice to raw 16-bit signed integer PCM data using the <a href="http://sox.sourceforge.net/" target="_blank" rel="noopener noreferrer">sox</a> utility present on most Linux systems and available for a wide range of platforms.</p><p><strong>stdint.h</strong></p><p>The <code>stdint.h</code> header provides definitions for many specialized integer size types. Use <code>int16_t</code> for 16-bit signed integers and <code>uint16_t</code> for 16-bit unsigned integers.</p><p><strong>Scripting</strong></p><p>Use bash scripting capabilities to reduce tedious manual steps!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/SPO600/tree/main/docs/B-Labs/lab5.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SPO600/B-Labs/lab4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 4</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SPO600/C-Projects/project"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Project</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose-of-this-lab" class="table-of-contents__link toc-highlight">Purpose of this Lab</a></li><li><a href="#x86_64-and-aarch64-systems" class="table-of-contents__link toc-highlight">x86_64 and AArch64 Systems</a></li><li><a href="#lab-instructions" class="table-of-contents__link toc-highlight">Lab Instructions</a><ul><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#multiple-approaches" class="table-of-contents__link toc-highlight">Multiple Approaches</a></li><li><a href="#dont-compare-across-machines" class="table-of-contents__link toc-highlight">Don&#39;t Compare Across Machines</a></li><li><a href="#important" class="table-of-contents__link toc-highlight">Important!</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></li><li><a href="#benchmarking" class="table-of-contents__link toc-highlight">Benchmarking</a><ul><li><a href="#deliverables" class="table-of-contents__link toc-highlight">Deliverables</a></li><li><a href="#things-to-consider" class="table-of-contents__link toc-highlight">Things to consider</a></li><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SPO600 - Software Portability and Optimization</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/SPO600/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/SPO600/assets/js/runtime~main.923d0cda.js"></script>
<script src="/SPO600/assets/js/main.48ab27b2.js"></script>
</body>
</html>